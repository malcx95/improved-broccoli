\documentclass[a4paper,titlepage]{article}
\usepackage[utf8]{inputenc} %Make sure all UTF8 characters work in the document
\usepackage{listings} %Add code sections
\usepackage{color}
\usepackage{graphicx}
\usepackage{titling}
\usepackage{textcomp}
\usepackage[hyphens]{url}
\usepackage[bottom]{footmisc}
\definecolor{listinggray}{gray}{0.9}
\definecolor{lbcolor}{rgb}{0.9,0.9,0.9}
\lstset{	%ifall du ska koda.
		backgroundcolor=\color{lbcolor},
		tabsize=4,
		rulecolor=,
		upquote=true,
		aboveskip={1.5\baselineskip},
		columns=fixed,
		showstringspaces=false,
		extendedchars=true,
	    breaklines=true,
	    prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	    frame=single,
	    showtabs=false,
	    showspaces=false,
	    showstringspaces=false,
	    identifierstyle=\ttfamily,
	    keywordstyle=\color[rgb]{0,0,1},
	    commentstyle=\color[rgb]{0.133,0.545,0.133},
	    stringstyle=\color[rgb]{0.627,0.126,0.941},
}

%Set page size
\usepackage{geometry}
\geometry{margin=3cm}
\usepackage{parskip} 
%\pretitle{%	en bild för framsidan
	%\begin{center}
	%\LARGE
%	\includegraphics[width=6cm]{python.png}\\[\bigskipamount]
%}
\title{
    \textbf{Miniprojekt 1 -- TANA21}}
\date{\today}
\author{%
    Malcolm Vigren \\
    \texttt{malvi108@student.liu.se}
    \and
    Frans Skarman\\
    \texttt{frask812@student.liu.se}
    }
\renewcommand*\contentsname{Innehållsförteckning}
\renewcommand*\tablename{Tabell}

\begin{document}
\maketitle
\newpage
\tableofcontents
\newpage

\section{Introduktion}
Numerisk integration är en viktig del i många beräkningar. Det är ofta svårt
eller omöjligt att integrera godtyckliga funktioner och datamängder analytiskt,
särskilt på datorer. Numerisk integration är dock inte exakt i det generella
fallet, vilket innebär att approximationer måste göras. En av dessa metoder
är trapetsmetoden, som approximerar integralen med hjälp av förstagradspolynom.
Denna studie siktar på att utvärdera hur väl denna metod presterar,
både noggrannhetsmässigt och beräkningskomplexitetsmässigt.

\subsection{Syfte}
Syftet med denna undersökning är att utvärdera trapetsmetoden för numerisk
beräkning av integraler. Noggrannhetsordningen samt den aritmetiska
komplexiteten hos metoden ska utvärderas.

\section{Teori}
Trapetsregeln approximerar integralen genom att anpassa förstagradspolynom till
funktionen som ska integreras, och beräkna arean under dessa. Detta kan
beräknas med formeln

\begin{equation}
    \int_{x_0}^{x_n}f(x)dx \approx T(h) = \frac{h}{2}(f(x_0) +
    2\sum_{k=1}^{n-1}f(x_k) + f(x_n))
\end{equation}

där $h$ är en steglängd.

\subsection{Experimentbeskrivning}

% Utvärderades utvärderades utvärderades
För att utvärdera noggranhetsordningen utvärderades ett antal integraler
analytiskt. Sedan beräknades det numeriska värdet av samma integraler med
trapetsmetoden och olika steglängder. För beräkningen av noggranhetsordning
användes steglängderna $h_i = \frac{1}{10^i}, i \in {1,2, \dots 5}$.
Felet vid varje steglängd $\Delta x$ beräknades sedan som differensen mellan de numeriskt
bestämda värdena och de analytiskt bestämda värdena.  Noggranhetsordningen
kunde sedan bestämmas genom Ekvation \ref{eq:orderofaccuracy}, där $R_t$
är felet som funktion av steglängden och $c$ är en konstant.

\begin{equation}
    \label{eq:orderofaccuracy}
    \frac{| R_t(h_{i+1})|}{| R_t(h_{i})|}  = \frac{ch_{i+1}^p}{ch_{i}^p} = 10^p
    \Leftrightarrow p \approx \log_{10}\left( \frac{h_{i+1}}{h_i} \right)
\end{equation}

Följande funktioner användes för evaluering av noggranhetsordningen:

\begin{itemize}
    \item Exponentialfunktionen $e^x$ med primitiv funktion $e^x$, under intervallet $[0, 1]$
    \item Förstagradspolynomet $x + 1$ med primitiv funktion $\frac{x^2}{2} + x$, under intervallet $[0, 1]$
    \item Andragradspolynomet $x^2 + 2x + 1$ med primitiv funktion
        $\frac{x^3}{3} + x^2 + x$, under intervallet $[0, 1]$
    \item 100-gradspolynomet $x^{100}$ med primitiv funktion
        $\frac{x^{101}}{101}$, under intervallet $[0, 1]$
    \item Funktionen $\frac{4}{1 + x^2}$ med primitiv funktion $4\arctan(x)$, under intervallet $[0, 1]$
    \item Den periodiska funktionen $\sin^2(x)$ med primitiv funktion
        $\frac{1}{4}\sin(2x)$, under intervallet $[0, \pi]$
\end{itemize}

% TODO: Skriv om hur vi får exponenten

På ett liknande sätt beräknades metodens aritmetiska komplexitet. Tiden det tog att köra
algoritmen vid olika steglängder bestämdes genom att utföra 100 iterationer av beräkningen
och mäta tiden det tog. Precis som för noggranhetsordningen kan aritmetiska komplexiteten
beräknas med Ekvation \ref{eq:arithmetic_complexity} där $T$ betecknar exekveringstiden
vid en viss steglängd.

\begin{equation}
    \label{eq:arithmetic_complexity}
    \frac{| T(h_{i+1})|}{| T_t(h_{i})|}  = \frac{ch_{i+1}^p}{ch_{i}^p} = 2^p
    \Leftrightarrow p \approx \log_{2}\left( \frac{h_{i+1}}{h_i} \right)
\end{equation}

Följande funktioner användes för evaluering av noggranhetsordningen:

\begin{itemize}
    \item Exponentialfunktionen $e^x$
    \item Andragradspolynomet $x^2 + 2x + 1$
    \item Funktionen $\frac{4}{1 + x^2}$
\end{itemize}

\section{Resultat}

\subsection{Something something error and shit}
\begin{table}[h]
    \begin{tabular}{c | c | c | c | c | c}
        $\mathbf{e^x}$ & $\mathbf{x + 1}$ & $\mathbf{x^2 + 2x + 1}$ &
        $\mathbf{x^{100}}$ & $\mathbf{\frac{4}{1 + x^2}}$ & $\mathbf{\sin^2(x)}$ \\ \hline
    0.0014316629 & 0.0000000000 & 0.0016666667 & 0.0401016661 & -0.0016666647 & 0.0000000000 \\
    0.0000143190 & -0.000000000 & 0.0000166667 & 0.0008201506 & -0.0000166667 & 0.0000000000 \\
    0.0000001432 & 0.0000000000 & 0.0000001667 & 0.0000083320 & -0.0000001667 & 0.0000000000 \\
    0.0000000014 & -0.000000000 & 0.0000000017 & 0.0000000833 & -0.0000000017 & 0.0000000000 \\
    0.0000000000 & 0.0000000000 & 0.0000000000 & 0.0000000008 & -0.0000000000 & 0.0000000000 \\
    \end{tabular}
    \caption{I have no idea what the fuck this is}
\end{table}

\subsection{Arithmetic complexity}

\begin{table}[h]
    \begin{tabular}{l | l | l}
        \textbf{Exp} & \textbf{2-degree} & \textbf{atan-shit} \\ \hline

    \caption{The results of the test of arithmetic complexity}
    \end{tabular}
\end{table}


\section{Diskussion}

De erhållna resultaten stämmer mestadels överens med vad som förväntades. För de integraler
där felet inte är 0 

\end{document}
